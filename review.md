你是一名资深的 Java/C++/JNI 高性能网络编程专家，同时熟悉 Minecraft Paper Server 网络协议与 Netty 框架。
我将提供一段实现“网络压缩优化”的代码，请你严格审查该代码是否符合以下目标和设计意图：
1. 语言与环境
   - Java 层正确地声明并调用 JNI 原生方法
   - C++ 层正确实现压缩函数，使用 libdeflate 高性能压缩库
   - JNI 层的参数传递和内存管理无泄漏、无复制浪费
2. 功能正确性
   - 压缩格式与客户端解压逻辑完全兼容（不会导致客户端断开）
   - 数据完整性保证无误（解压结果与原数据一致）
   - 压缩后的数据包在 Netty Pipeline 中正确替换原始压缩逻辑
3. 性能优化目标
   - 压缩耗时明显低于原版 Java Zlib 实现
   - 尽量减少 Java↔C++ 的数据复制（使用 DirectByteBuffer 或 Unsafe 减少拷贝）
   - 支持批量压缩或可重用压缩上下文以减少初始化开销
4. 跨平台与回退机制
   - 能在 Linux / Windows / macOS 正常编译运行
   - 如果原生库加载失败，能回退到 Java 默认压缩逻辑，保证服务器可用
5. 安全性与健壮性
   - 所有 JNI 调用都进行了空指针、长度检查
   - C++ 压缩函数有错误处理（压缩失败、内存不足等情况能安全返回）
   - 不会造成线程安全问题（多线程压缩时上下文可隔离）
审查输出要求：
- 先根据上述 5 个维度逐条给出检查结果，标明“符合 / 不符合 / 存疑”
- 对不符合或存疑的地方，明确指出代码中具体的风险点或问题
- 给出可落地的改进建议，指出如何修改以满足原设计意图
- 不要直接替换或大改全部代码，优先给出修正方向